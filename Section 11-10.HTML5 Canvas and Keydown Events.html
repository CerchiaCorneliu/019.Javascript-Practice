<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>HTML5 Canvas and Keydown Events</title>
  </head>
  <body>
    <header>
      <p>Press TAB to begin, W, A, S, D keys to move</p>
    </header>
    <SECTION style="border-style: solid; border-width: 2px; width: 500px;">
      <CANVAS HEIGHT="400" WIDTH="500" ID="canvas_1" tabindex="0">
        Your browser is like really old, dude - no canvas support!
      </CANVAS>
    </SECTION>
    <script>
      // addEventListener( event_type, event_handler, capture )
      // window.addEventListener( "keypress", doKeyDown, false )
      var canvas = document.getElementById("canvas_1");
      canvas.addEventListener( 'keydown', doKeyDown, true);

      canvas_context = canvas.getContext("2d");
      canvas_context.fillRect(100, 100, 50, 30);w
      var x = 100;
      var y = 100;

      function doKeyDown(e) {
        // W key
        if ( e.keyCode == 87 ) {
          clearCanvas();
          y = y - 10;
          canvas_context.fillRect(x, y, 50, 30);
        }
        // S key
        if ( e.keyCode == 83 ) {
          clearCanvas();
          y = y + 10;
          canvas_context.fillRect(x, y, 50, 30);
        }
        // A key
        if ( e.keyCode == 65 ) {
          clearCanvas();
          x = x - 10;
          canvas_context.fillRect(x, y, 50, 30);
        }
        // D key
        if ( e.keyCode == 68 ) {
          clearCanvas();
          x = x + 10;
          canvas_context.fillRect(x, y, 50, 30);
        }
      }

      function clearCanvas() {
        canvas.width = canvas.width;
      }

    </script>
  </body>
</html>
